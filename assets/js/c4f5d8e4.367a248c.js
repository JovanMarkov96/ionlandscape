"use strict";(globalThis.webpackChunkionlandscape_site=globalThis.webpackChunkionlandscape_site||[]).push([[634],{192(e,o,n){n.r(o),n.d(o,{default:()=>l});var t=n(6540),r=n(8478),a=n(374),i=n(4848);function s(){const[e,o]=(0,t.useState)(null),[r,s]=(0,t.useState)(null),[l,c]=(0,t.useState)(!1),d=n(8738).A,p=n(8287).A;(0,t.useEffect)(()=>{const e=new URLSearchParams(window.location.search).get("person");if(e){o(e),c(!0);const n=window.location.pathname;window.history.replaceState({},"",n)}},[]),(0,t.useEffect)(()=>{e&&c(!0)},[e]);const u=e=>{o(e),c(!0)};return(0,i.jsx)(a.A,{title:"Map",description:"Interactive map of ion trap and neutral atom quantum computing groups",noFooter:!1,children:(0,i.jsxs)("div",{className:"ion-landscape-container",children:[(0,i.jsx)("div",{className:"ion-landscape-map",children:(0,i.jsx)(d,{onPersonSelect:u,onLocationSelect:e=>s(e)})}),(0,i.jsxs)("div",{className:"ion-landscape-panel "+(l?"panel-open":""),children:[(0,i.jsx)("button",{className:"back-to-map-btn",onClick:()=>{c(!1)},children:"\u2190 Back to Map"}),(0,i.jsx)(p,{personId:e,location:r,onPersonSelect:u,onClose:()=>{o(null),s(null)}})]}),(0,i.jsx)("button",{className:"mobile-panel-toggle",onClick:()=>c(!l),"aria-label":l?"Close panel":"Open panel",children:l?"\u2715":"\u2630"})]})})}function l(){return(0,i.jsx)(r.A,{fallback:(0,i.jsx)("div",{style:{padding:20},children:"Loading map..."}),children:()=>(0,i.jsx)(s,{})})}},8287(e,o,n){n.d(o,{A:()=>s});var t=n(6540),r=n(7331),a=n(8774),i=n(4848);const s=function({personId:e,location:o,onPersonSelect:n,onClose:s}){const[l,c]=(0,t.useState)([]),[d,p]=(0,t.useState)(null),[u,m]=(0,t.useState)("");(0,t.useEffect)(()=>{fetch("/ionlandscape/data/people.json").then(e=>e.json()).then(c).catch(e=>{fetch("/data/people.json").then(e=>e.json()).then(c).catch(e=>console.warn("Could not load people.json",e))})},[]),(0,t.useEffect)(()=>{if(!e)return p(null),void m("");const o=l.find(o=>o.md_filename===e)||l.find(o=>o.id===e);o?(p(o),m(o.short_bio||"No biography available.")):p(null)},[e,l]);const h=e=>{if(!e)return null;const o=l.find(o=>o.name&&o.name.toLowerCase()===e.toLowerCase()||o.sort_name&&o.sort_name.toLowerCase()===e.toLowerCase()||o.id===e);return o&&n?(0,i.jsx)("span",{style:{color:"#007bff",cursor:"pointer",textDecoration:"underline"},onClick:()=>n(o.md_filename),children:e}):(0,i.jsx)("span",{children:e})},f=e=>{e.preventDefault(),e.stopPropagation(),s&&s()};return o&&!d?(0,i.jsxs)("div",{style:{padding:16,position:"relative"},children:[s&&(0,i.jsx)("button",{className:"close-panel-btn",onClick:f,"aria-label":"Close location view",children:"\u2715"}),(0,i.jsxs)("h3",{children:[o.city,", ",o.country]}),(0,i.jsx)("p",{children:"People at this location (click a marker):"})]}):d?(0,i.jsxs)("div",{style:{padding:16,position:"relative",backgroundColor:"var(--ifm-background-color)"},children:[s&&(0,i.jsx)("button",{className:"close-panel-btn",onClick:f,"aria-label":"Close profile",children:"\u2715"}),(0,i.jsx)("div",{className:"person-panel-header",children:(0,i.jsx)("h2",{children:d.name})}),(0,i.jsx)("p",{children:(0,i.jsxs)("em",{children:[d.current_position&&d.current_position.title," \u2014 ",d.current_position&&d.current_position.institution]})}),(0,i.jsxs)("p",{children:[(0,i.jsx)("strong",{children:"Keywords:"})," ",(d.keywords||[]).join(", ")]}),(0,i.jsxs)("div",{style:{marginBottom:"15px"},children:[d.platforms&&d.platforms.map((e,o)=>{const n=(e=>{const o=e.toLowerCase();return o.includes("neutral")?"Neutral Atoms":o.includes("ion")?"Trapped Ions":e})(e);return(0,i.jsx)("a",{href:`/ionlandscape/groups?category=${encodeURIComponent(n)}`,className:"badge "+("Trapped Ions"===n?"badge-trapped-ions":"Neutral Atoms"===n?"badge-neutral-atoms":"badge--info"),style:{marginRight:"5px",textDecoration:"none",color:"#fff"},children:e},o)}),d.labels&&d.labels.map((e,o)=>(0,i.jsx)(a.A,{to:`/groups?label=${encodeURIComponent(e)}`,className:"badge badge--primary margin-right--xs",style:{textDecoration:"none",color:"white"},children:e},o)),d.ion_species?.map(e=>(0,i.jsx)(a.A,{to:`/groups?ion=${encodeURIComponent(e)}`,className:"badge badge--secondary margin-right--xs",style:{textDecoration:"none",color:"black"},children:e},e))]}),d.affiliations&&d.affiliations.length>0&&(0,i.jsxs)("div",{className:"affiliation-box",children:[(0,i.jsx)("h4",{className:"affiliation-header",children:"Affiliations"}),d.affiliations.map((e,o)=>(0,i.jsxs)("div",{className:"affiliation-item",children:[(0,i.jsx)("strong",{children:e.name})," \u2014 ",e.role]},o))]}),(0,i.jsx)("hr",{}),(0,i.jsx)("div",{className:"person-bio",children:(0,i.jsx)(r.oz,{children:u})}),(d.education?.length>0||d.postdocs?.length>0)&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("hr",{}),(0,i.jsx)("h3",{children:"Academic Trajectory"}),d.education&&d.education.length>0&&(0,i.jsxs)("div",{style:{marginBottom:16},children:[(0,i.jsx)("h4",{className:"section-header",children:"Education"}),d.education.map((e,o)=>(0,i.jsxs)("div",{className:"trajectory-item",children:[(0,i.jsxs)("div",{className:"trajectory-title",children:[e.degree," \u2014 ",e.institution]}),(0,i.jsxs)("div",{className:"trajectory-details",children:[e.year&&(0,i.jsxs)("span",{children:["(",e.year,") "]}),e.advisor&&(0,i.jsxs)(i.Fragment,{children:["Advisor: ",h(e.advisor)]})]})]},o))]}),d.postdocs&&d.postdocs.length>0&&(0,i.jsxs)("div",{children:[(0,i.jsx)("h4",{className:"section-header",children:"Postdoctoral Training"}),d.postdocs.map((e,o)=>(0,i.jsxs)("div",{className:"trajectory-item",children:[(0,i.jsx)("div",{className:"trajectory-title",children:e.institution}),(0,i.jsx)("div",{className:"trajectory-details",children:e.advisor&&(0,i.jsxs)(i.Fragment,{children:["Advisor: ",h(e.advisor)]})})]},o))]})]}),(0,i.jsx)("hr",{}),(0,i.jsx)("p",{children:(0,i.jsx)("strong",{children:"Links"})}),(0,i.jsxs)("ul",{style:{paddingLeft:20},children:[d.links&&d.links.homepage?(0,i.jsx)("li",{children:(0,i.jsx)("a",{href:d.links.homepage,target:"_blank",rel:"noopener noreferrer",children:"Homepage"})}):null,d.links&&d.links.google_scholar?(0,i.jsx)("li",{children:(0,i.jsx)("a",{href:d.links.google_scholar,target:"_blank",rel:"noopener noreferrer",children:"Google Scholar"})}):null,d.links&&d.links.orcid?(0,i.jsx)("li",{children:(0,i.jsx)("a",{href:d.links.orcid,target:"_blank",rel:"noopener noreferrer",children:"ORCID"})}):null]})]}):(0,i.jsxs)("div",{style:{padding:16},children:[(0,i.jsx)("h3",{children:"Ion Landscape"}),(0,i.jsx)("p",{children:"Click a marker on the map to view a person profile."})]})}},8738(e,o,n){n.d(o,{A:()=>p});var t=n(6540),r=n(5293),a=n(6443),i=n.n(a),s=n(8074),l=n(4848);const c=[20,44],d=e=>({version:8,name:e?"Ion Landscape Dark":"Ion Landscape Light",sources:{openmaptiles:{type:"vector",url:"https://tiles.openfreemap.org/planet"},"serbia-boundary":{type:"geojson",data:"/ionlandscape/map/serbia.geojson"}},glyphs:"https://demotiles.maplibre.org/font/{fontstack}/{range}.pbf",layers:[{id:"background",type:"background",paint:{"background-color":e?"#1a1a2e":"#f8f4f0"}},{id:"water",type:"fill",source:"openmaptiles","source-layer":"water",paint:{"fill-color":e?"#1e3a5f":"#a0c8f0"}},{id:"landcover",type:"fill",source:"openmaptiles","source-layer":"landcover",paint:{"fill-color":e?"#2d4a3e":"#d8e8c8","fill-opacity":.4}},{id:"park",type:"fill",source:"openmaptiles","source-layer":"park",paint:{"fill-color":e?"#2d4a3e":"#c8e6c8","fill-opacity":.5}},{id:"building",type:"fill",source:"openmaptiles","source-layer":"building",paint:{"fill-color":e?"#2a2a3e":"#ddd","fill-opacity":.7},minzoom:13},{id:"road-minor",type:"line",source:"openmaptiles","source-layer":"transportation",filter:["in","class","minor","service","path"],paint:{"line-color":e?"#3a3a4e":"#fff","line-width":1},minzoom:12},{id:"road-secondary",type:"line",source:"openmaptiles","source-layer":"transportation",filter:["in","class","secondary","tertiary"],paint:{"line-color":e?"#4a4a5e":"#fefeb3","line-width":2},minzoom:8},{id:"road-primary",type:"line",source:"openmaptiles","source-layer":"transportation",filter:["==","class","primary"],paint:{"line-color":e?"#5a5a6e":"#fcd6a4","line-width":3},minzoom:6},{id:"road-motorway",type:"line",source:"openmaptiles","source-layer":"transportation",filter:["==","class","motorway"],paint:{"line-color":"#e9ac77","line-width":4},minzoom:4},{id:"admin-boundary",type:"line",source:"openmaptiles","source-layer":"boundary",filter:["all",["==","admin_level",2],["!=","disputed",1],["!=","maritime",1]],paint:{"line-color":e?"#6a6a7e":"#9e9cab","line-width":1,"line-dasharray":[3,2]}},{id:"serbia-fill",type:"fill",source:"serbia-boundary",paint:{"fill-color":"#4f46e5","fill-opacity":e?.08:.04}},{id:"serbia-outline",type:"line",source:"serbia-boundary",paint:{"line-color":e?"#7c6ef5":"#4f46e5","line-width":2}},{id:"place-city",type:"symbol",source:"openmaptiles","source-layer":"place",filter:["==","class","city"],layout:{"text-field":["get","name"],"text-font":["Noto Sans Regular"],"text-size":14},paint:{"text-color":e?"#e0e0e0":"#333","text-halo-color":e?"#1a1a2e":"#fff","text-halo-width":1.5},minzoom:5},{id:"place-country",type:"symbol",source:"openmaptiles","source-layer":"place",filter:["==","class","country"],layout:{"text-field":["get","name"],"text-font":["Noto Sans Bold"],"text-size":14,"text-transform":"uppercase","text-letter-spacing":.1},paint:{"text-color":e?"#b0b0b0":"#555","text-halo-color":e?"#1a1a2e":"#fff","text-halo-width":2},minzoom:2,maxzoom:6}]});const p=function({onPersonSelect:e}){const o=(0,t.useRef)(null),n=(0,t.useRef)(null),a=(0,t.useRef)([]),p=(0,t.useRef)(null),[u,m]=t.useState([]),{colorMode:h}=(0,r.G)(),f="dark"===h;(0,t.useEffect)(()=>{fetch("/ionlandscape/data/people.geojson").then(e=>e.json()).then(e=>{e?.features&&m(e.features)}).catch(()=>{fetch("/data/people.geojson").then(e=>e.json()).then(e=>m(e.features)).catch(e=>console.warn("Could not load people.geojson",e))})},[]);const x=(0,t.useMemo)(()=>function(e){const o=new Map;for(const n of e){const e=n.geometry;if(!e||!e.coordinates)continue;const[t,r]=e.coordinates,a=`${r.toFixed(5)},${t.toFixed(5)}`;o.has(a)||o.set(a,[]),o.get(a).push(n)}for(const[,n]of o)n.sort((e,o)=>{const n=e.properties?.id||"",t=o.properties?.id||"";return n.localeCompare(t)});return o}(u),[u]),g=(0,t.useCallback)((e,o)=>{let n='<div style="min-width: 200px; max-height: 250px; overflow-y: auto;">';return o&&(n+=`<div style="font-weight: bold; margin-bottom: 8px; border-bottom: 1px solid #ccc; padding-bottom: 4px;">${o}</div>`),e.forEach((o,t)=>{const r=o.properties||{},a=t<e.length-1?"border-bottom: 1px solid #eee;":"",i=r.current_position||(r.short_bio?r.short_bio.substring(0,60)+"...":"");n+=`\n                <div style="padding: 6px 0; ${a}">\n                    <div style="font-weight: bold;">${r.name||"Unknown"}</div>\n                    <div style="font-size: 0.85em; color: #666; margin-bottom: 4px;">${i}</div>\n                    <button \n                        class="maplibre-popup-btn" \n                        data-person="${r.md_filename}"\n                        style="font-size: 0.8em; padding: 4px 10px; cursor: pointer; background: #4f46e5; color: white; border: none; border-radius: 4px;">\n                        Open profile\n                    </button>\n                </div>\n            `}),n+="</div>",n},[]);return(0,t.useEffect)(()=>{if(!o.current||n.current)return;p.current||(p.current=new s.Zs,i().addProtocol("pmtiles",p.current.tile));const t=new(i().Map)({container:o.current,style:d(f),center:c,zoom:2,maxZoom:18,minZoom:1});return t.addControl(new(i().NavigationControl),"top-right"),t.addControl(new(i().AttributionControl)({compact:!0,customAttribution:"\xa9 OpenStreetMap contributors"})),t.getContainer().addEventListener("click",o=>{if(o.target.classList.contains("maplibre-popup-btn")){const n=o.target.getAttribute("data-person");n&&e&&e(n)}}),t.on("load",()=>{console.log("MapLibre GL JS loaded - Self-hosted, zero external dependencies"),console.log("Serbia boundary: Kosovo rendered as part of Serbia")}),n.current=t,()=>{a.current.forEach(e=>e.remove()),a.current=[],t.remove(),n.current=null}},[]),(0,t.useEffect)(()=>{n.current&&n.current.setStyle(d(f))},[f]),(0,t.useEffect)(()=>{n.current&&(a.current.forEach(e=>e.remove()),a.current=[],Array.from(x.entries()).forEach(([,e])=>{const o=e[0],[t,r]=o.geometry.coordinates,s=o.properties||{},l=s.city&&s.country?`${s.city}, ${s.country}`:null,c=new(i().Popup)({offset:25,maxWidth:"300px"}).setHTML(g(e,l)),d=new(i().Marker)({color:"#4f46e5"}).setLngLat([t,r]).setPopup(c).addTo(n.current);a.current.push(d)}))},[x,g]),(0,l.jsx)("div",{ref:o,style:{height:"100%",width:"100%"}})}}}]);