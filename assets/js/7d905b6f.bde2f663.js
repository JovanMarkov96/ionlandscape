"use strict";(globalThis.webpackChunkionlandscape_site=globalThis.webpackChunkionlandscape_site||[]).push([[840],{8662(e,l,s){s.r(l),s.d(l,{default:()=>c});var t=s(6540),n=s(223),a=s(8774),i=s(6347),r=s(4848);const c=function(){const e=(0,i.zy)(),l=(0,i.W6)(),[s,c]=(0,t.useState)([]),o=new URLSearchParams(e.search),d=o.get("q")||"",h=o.getAll("label"),u=o.getAll("ion"),p=o.getAll("inst"),m=o.getAll("country"),[f,x]=(0,t.useState)(d);(0,t.useEffect)(()=>{x(d)},[d]),(0,t.useEffect)(()=>{const e=setTimeout(()=>{f!==d&&N({q:f,label:h,ion:u,inst:p,country:m},!0)},300);return()=>clearTimeout(e)},[f,h,u,p,m]);const{allLabels:g,allIons:j,allInstitutions:v,allCountries:b}=(0,t.useMemo)(()=>{const e=new Set,l=new Set,t=new Set,n=new Set;return s.forEach(s=>{(s.labels||[]).forEach(l=>e.add(l)),(s.ion_species||[]).forEach(e=>l.add(e)),s.current_position?.institution&&t.add(s.current_position.institution),s.location?.country&&n.add(s.location.country)}),{allLabels:Array.from(e).sort(),allIons:Array.from(l).sort(),allInstitutions:Array.from(t).sort(),allCountries:Array.from(n).sort()}},[s]);(0,t.useEffect)(()=>(document.body.style.overflow="auto",()=>{document.body.style.overflow=""}),[]),(0,t.useEffect)(()=>{fetch("/ionlandscape/data/people.json").then(e=>e.json()).then(c).catch(()=>{fetch("/data/people.json").then(e=>e.json()).then(c)})},[]);const y=(0,t.useMemo)(()=>s.length?s.filter(e=>{if(d){const l=d.toLowerCase();if(!(e.name?.toLowerCase().includes(l)||e.sort_name?.toLowerCase().includes(l)))return!1}if(h.length>0){if(!h.every(l=>e.labels&&e.labels.includes(l)))return!1}if(u.length>0){if(!u.every(l=>e.ion_species&&e.ion_species.includes(l)))return!1}if(p.length>0){if(!p.every(l=>e.current_position?.institution===l))return!1}if(m.length>0){if(!m.every(l=>e.location?.country===l))return!1}return!0}):[],[s,d,h,u,p,m]),N=e=>{const s=new URLSearchParams;e.q&&s.set("q",e.q),(e.label||[]).forEach(e=>s.append("label",e)),(e.ion||[]).forEach(e=>s.append("ion",e)),(e.inst||[]).forEach(e=>s.append("inst",e)),(e.country||[]).forEach(e=>s.append("country",e)),l.push({search:s.toString()})},C=(e,l)=>{const s={q:f,label:h,ion:u,inst:p,country:m};s[e].includes(l)||(s[e]=[...s[e],l],N(s))},w=(e,l)=>{const s={q:f,label:h,ion:u,inst:p,country:m};s[e]=s[e].filter(e=>e!==l),N(s)},_=d||h.length>0||u.length>0||p.length>0||m.length>0,k=g.filter(e=>!h.includes(e)),A=j.filter(e=>!u.includes(e)),E=v.filter(e=>!p.includes(e)),S=b.filter(e=>!m.includes(e));return(0,r.jsx)(n.A,{title:"Groups",children:(0,r.jsxs)("div",{className:"groups-page container margin-vert--lg",children:[(0,r.jsx)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:(0,r.jsx)("h1",{children:"Research Groups"})}),(0,r.jsxs)("div",{className:"filter-bar",children:[(0,r.jsx)("div",{style:{marginBottom:"16px"},children:(0,r.jsx)("input",{type:"text",className:"filter-select",style:{width:"100%",maxWidth:"400px",cursor:"text"},placeholder:"Search by name...",value:f,onChange:e=>x(e.target.value)})}),(0,r.jsxs)("div",{className:"filter-bar-row",children:[(0,r.jsxs)("select",{className:"filter-select",value:"",onChange:e=>e.target.value&&C("label",e.target.value),children:[(0,r.jsx)("option",{value:"",children:"+ Label"}),k.map(e=>(0,r.jsx)("option",{value:e,children:e},e))]}),(0,r.jsxs)("select",{className:"filter-select",value:"",onChange:e=>e.target.value&&C("ion",e.target.value),children:[(0,r.jsx)("option",{value:"",children:"+ Ion Species"}),A.map(e=>(0,r.jsx)("option",{value:e,children:e},e))]}),(0,r.jsxs)("select",{className:"filter-select",value:"",onChange:e=>e.target.value&&C("inst",e.target.value),children:[(0,r.jsx)("option",{value:"",children:"+ Institution"}),E.map(e=>(0,r.jsx)("option",{value:e,children:e},e))]}),(0,r.jsxs)("select",{className:"filter-select",value:"",onChange:e=>e.target.value&&C("country",e.target.value),children:[(0,r.jsx)("option",{value:"",children:"+ Country"}),S.map(e=>(0,r.jsx)("option",{value:e,children:e},e))]}),_&&(0,r.jsx)("button",{className:"clear-all-btn",onClick:()=>{x(""),l.push({search:""})},children:"Clear All"})]}),_&&(0,r.jsxs)("div",{className:"filter-chips",children:[h.map(e=>(0,r.jsxs)("span",{className:"filter-chip filter-chip--label",children:[e," ",(0,r.jsx)("button",{className:"filter-chip-remove",onClick:()=>w("label",e),children:"\xd7"})]},`label-${e}`)),u.map(e=>(0,r.jsxs)("span",{className:"filter-chip filter-chip--ion",children:[e," ",(0,r.jsx)("button",{className:"filter-chip-remove",onClick:()=>w("ion",e),children:"\xd7"})]},`ion-${e}`)),p.map(e=>(0,r.jsxs)("span",{className:"filter-chip",style:{background:"#e9ecef",color:"#333",border:"1px solid #ddd"},children:["\ud83c\udfdb\ufe0f ",e," ",(0,r.jsx)("button",{className:"filter-chip-remove",onClick:()=>w("inst",e),children:"\xd7"})]},`inst-${e}`)),m.map(e=>(0,r.jsxs)("span",{className:"filter-chip",style:{background:"#e9ecef",color:"#333",border:"1px solid #ddd"},children:["\ud83c\udf0d ",e," ",(0,r.jsx)("button",{className:"filter-chip-remove",onClick:()=>w("country",e),children:"\xd7"})]},`country-${e}`))]})]}),(0,r.jsxs)("p",{style:{color:"#666"},children:["Found ",y.length," researchers"]}),(0,r.jsxs)("div",{className:"row",children:[y.map(e=>(0,r.jsx)("div",{className:"col col--4 margin-bottom--lg",children:(0,r.jsxs)("div",{className:"card",children:[(0,r.jsx)("div",{className:"card__header",children:(0,r.jsx)("h3",{children:e.name})}),(0,r.jsxs)("div",{className:"card__body",children:[(0,r.jsx)("p",{children:e.current_position?.institution}),(0,r.jsx)("div",{style:{marginBottom:8},children:e.labels?.map(e=>(0,r.jsx)("span",{className:"badge badge--primary margin-right--xs",style:{cursor:"pointer"},onClick:()=>C("label",e),children:e},e))}),(0,r.jsx)("div",{children:e.ion_species?.map(e=>(0,r.jsx)("span",{className:"badge badge--secondary margin-right--xs",style:{cursor:"pointer"},onClick:()=>C("ion",e),children:e},e))})]}),(0,r.jsx)("div",{className:"card__footer",children:(0,r.jsx)(a.A,{to:`/?person=${e.id}`,className:"button button--primary button--block",children:"View on Map"})})]})},e.id)),0===y.length&&(0,r.jsx)("div",{className:"col col--12",children:(0,r.jsx)("div",{className:"alert alert--warning",children:(0,r.jsx)("p",{children:"No groups found matching criteria."})})})]})]})})}}}]);