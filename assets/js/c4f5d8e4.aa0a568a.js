"use strict";(globalThis.webpackChunkionlandscape_site=globalThis.webpackChunkionlandscape_site||[]).push([[634],{192(e,n,o){o.r(n),o.d(n,{default:()=>l});var t=o(6540),s=o(8478),i=o(4848);function r(){const[e,n]=(0,t.useState)(null),[s,r]=(0,t.useState)(null),[l,a]=(0,t.useState)(!1),c=o(8738).A,d=o(8287).A;(0,t.useEffect)(()=>{e&&a(!0)},[e]);const p=e=>{n(e),a(!0)};return(0,i.jsxs)("div",{className:"ion-landscape-container",children:[(0,i.jsx)("div",{className:"ion-landscape-map",children:(0,i.jsx)(c,{onPersonSelect:p,onLocationSelect:e=>r(e)})}),(0,i.jsxs)("div",{className:"ion-landscape-panel "+(l?"panel-open":""),children:[(0,i.jsx)("button",{className:"back-to-map-btn",onClick:()=>{a(!1)},children:"\u2190 Back to Map"}),(0,i.jsx)(d,{personId:e,location:s,onPersonSelect:p,onClose:()=>{n(null),r(null)}})]}),(0,i.jsx)("button",{className:"mobile-panel-toggle",onClick:()=>a(!l),"aria-label":l?"Close panel":"Open panel",children:l?"\u2715":"\u2630"})]})}function l(){return(0,i.jsx)(s.A,{fallback:(0,i.jsx)("div",{style:{padding:20},children:"Loading map..."}),children:()=>(0,i.jsx)(r,{})})}},8287(e,n,o){o.d(n,{A:()=>l});var t=o(6540),s=o(7331),i=o(8774),r=o(4848);const l=function({personId:e,location:n,onPersonSelect:o,onClose:l}){const[a,c]=(0,t.useState)([]),[d,p]=(0,t.useState)(null),[h,m]=(0,t.useState)("");(0,t.useEffect)(()=>{fetch("/ionlandscape/data/people.json").then(e=>e.json()).then(c).catch(e=>{fetch("/data/people.json").then(e=>e.json()).then(c).catch(e=>console.warn("Could not load people.json",e))})},[]),(0,t.useEffect)(()=>{if(!e)return p(null),void m("");const n=a.find(n=>n.md_filename===e)||a.find(n=>n.id===e);n?(p(n),m(n.short_bio||"No biography available.")):p(null)},[e,a]);const x=e=>{if(!e)return null;const n=a.find(n=>n.name&&n.name.toLowerCase()===e.toLowerCase()||n.sort_name&&n.sort_name.toLowerCase()===e.toLowerCase()||n.id===e);return n&&o?(0,r.jsx)("span",{style:{color:"#007bff",cursor:"pointer",textDecoration:"underline"},onClick:()=>o(n.md_filename),children:e}):(0,r.jsx)("span",{children:e})},u=e=>{e.preventDefault(),e.stopPropagation(),l&&l()};return n&&!d?(0,r.jsxs)("div",{style:{padding:16,position:"relative"},children:[l&&(0,r.jsx)("button",{className:"close-panel-btn",onClick:u,"aria-label":"Close location view",children:"\u2715"}),(0,r.jsxs)("h3",{children:[n.city,", ",n.country]}),(0,r.jsx)("p",{children:"People at this location (click a marker):"})]}):d?(0,r.jsxs)("div",{style:{padding:16,position:"relative"},children:[l&&(0,r.jsx)("button",{className:"close-panel-btn",onClick:u,"aria-label":"Close profile",children:"\u2715"}),(0,r.jsx)("div",{className:"person-panel-header",children:(0,r.jsx)("h2",{children:d.name})}),(0,r.jsx)("p",{children:(0,r.jsxs)("em",{children:[d.current_position&&d.current_position.title," \u2014 ",d.current_position&&d.current_position.institution]})}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Platforms:"})," ",(d.platforms||[]).join(", ")]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Keywords:"})," ",(d.keywords||[]).join(", ")]}),(0,r.jsxs)("div",{style:{marginBottom:12},children:[d.labels?.map(e=>(0,r.jsx)(i.A,{to:`/groups?label=${encodeURIComponent(e)}`,className:"badge badge--primary margin-right--xs",style:{textDecoration:"none",color:"white"},children:e},e)),d.ion_species?.map(e=>(0,r.jsx)(i.A,{to:`/groups?ion=${encodeURIComponent(e)}`,className:"badge badge--secondary margin-right--xs",style:{textDecoration:"none",color:"black"},children:e},e))]}),d.affiliations&&d.affiliations.length>0&&(0,r.jsxs)("div",{style:{marginTop:12,marginBottom:12,padding:"8px 12px",backgroundColor:"#f5f5f5",borderRadius:4},children:[(0,r.jsx)("h4",{style:{margin:"0 0 4px 0",fontSize:"1em",color:"#333"},children:"Affiliations"}),d.affiliations.map((e,n)=>(0,r.jsxs)("div",{style:{fontSize:"0.9em"},children:[(0,r.jsx)("strong",{children:e.name})," \u2014 ",e.role]},n))]}),(0,r.jsx)("hr",{}),(0,r.jsx)("div",{className:"person-bio",children:(0,r.jsx)(s.oz,{children:h})}),(d.education?.length>0||d.postdocs?.length>0)&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("hr",{}),(0,r.jsx)("h3",{children:"Academic Trajectory"}),d.education&&d.education.length>0&&(0,r.jsxs)("div",{style:{marginBottom:16},children:[(0,r.jsx)("h4",{style:{marginBottom:8,fontSize:"1.1em",color:"#555"},children:"Education"}),d.education.map((e,n)=>(0,r.jsxs)("div",{style:{marginBottom:12,paddingLeft:8,borderLeft:"2px solid #eee"},children:[(0,r.jsxs)("div",{style:{fontWeight:600},children:[e.degree," \u2014 ",e.institution]}),(0,r.jsxs)("div",{style:{fontSize:"0.9em",color:"#666"},children:[e.year&&(0,r.jsxs)("span",{children:["(",e.year,") "]}),e.advisor&&(0,r.jsxs)(r.Fragment,{children:["Advisor: ",x(e.advisor)]})]})]},n))]}),d.postdocs&&d.postdocs.length>0&&(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{style:{marginBottom:8,fontSize:"1.1em",color:"#555"},children:"Postdoctoral Training"}),d.postdocs.map((e,n)=>(0,r.jsxs)("div",{style:{marginBottom:12,paddingLeft:8,borderLeft:"2px solid #eee"},children:[(0,r.jsx)("div",{style:{fontWeight:600},children:e.institution}),(0,r.jsx)("div",{style:{fontSize:"0.9em",color:"#666"},children:e.advisor&&(0,r.jsxs)(r.Fragment,{children:["Advisor: ",x(e.advisor)]})})]},n))]})]}),(0,r.jsx)("hr",{}),(0,r.jsx)("p",{children:(0,r.jsx)("strong",{children:"Links"})}),(0,r.jsxs)("ul",{style:{paddingLeft:20},children:[d.links&&d.links.homepage?(0,r.jsx)("li",{children:(0,r.jsx)("a",{href:d.links.homepage,target:"_blank",rel:"noopener noreferrer",children:"Homepage"})}):null,d.links&&d.links.google_scholar?(0,r.jsx)("li",{children:(0,r.jsx)("a",{href:d.links.google_scholar,target:"_blank",rel:"noopener noreferrer",children:"Google Scholar"})}):null,d.links&&d.links.orcid?(0,r.jsx)("li",{children:(0,r.jsx)("a",{href:d.links.orcid,target:"_blank",rel:"noopener noreferrer",children:"ORCID"})}):null]})]}):(0,r.jsxs)("div",{style:{padding:16},children:[(0,r.jsx)("h3",{children:"Ion Landscape"}),(0,r.jsx)("p",{children:"Click a marker on the map to view a person profile."})]})}},8738(e,n,o){o.d(n,{A:()=>h});var t=o(6540),s=o(6162),i=o(4489),r=o(3489),l=o(9368),a=o(3481),c=o.n(a),d=o(4848);const p=[20,0];const h=function({onPersonSelect:e,onLocationSelect:n}){const[o,a]=t.useState([]);(0,t.useEffect)(()=>{fetch("/ionlandscape/data/people.geojson").then(e=>e.json()).then(e=>{e&&e.features&&a(e.features)}).catch(e=>{fetch("/data/people.geojson").then(e=>e.json()).then(e=>a(e.features)).catch(e=>console.warn("Could not load people.geojson",e))})},[]),(0,t.useEffect)(()=>{delete c().Icon.Default.prototype._getIconUrl,c().Icon.Default.mergeOptions({iconRetinaUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon-2x.png",iconUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon.png",shadowUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-shadow.png"})},[]);const h=(0,t.useMemo)(()=>function(e){const n=new Map;for(const o of e){const e=o.geometry;if(!e||!e.coordinates)continue;const[t,s]=e.coordinates,i=`${s.toFixed(5)},${t.toFixed(5)}`;n.has(i)||n.set(i,[]),n.get(i).push(o)}for(const[o,t]of n)t.sort((e,n)=>{const o=e.properties?.id||"",t=n.properties?.id||"";return o.localeCompare(t)});return n}(o),[o]);return(0,d.jsxs)(s.W,{center:p,zoom:2,style:{height:"100%",width:"100%"},children:[(0,d.jsx)(l.e,{attribution:"\xa9 OpenStreetMap contributors",url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),Array.from(h.entries()).map(([n,o])=>{const t=o[0],[s,l]=t.geometry.coordinates,a=t.properties||{},c=a.city&&a.country?`${a.city}, ${a.country}`:null;return(0,d.jsx)(i.p,{position:[l,s],children:(0,d.jsx)(r.z,{children:(0,d.jsxs)("div",{style:{minWidth:"200px"},children:[c&&(0,d.jsx)("div",{style:{fontWeight:"bold",marginBottom:"8px",borderBottom:"1px solid #ccc",paddingBottom:"4px"},children:c}),(0,d.jsx)("div",{style:{maxHeight:"200px",overflowY:"auto"},children:o.map((n,t)=>{const s=n.properties||{};return(0,d.jsxs)("div",{style:{padding:"6px 0",borderBottom:t<o.length-1?"1px solid #eee":"none"},children:[(0,d.jsx)("div",{style:{fontWeight:"bold"},children:s.name}),(0,d.jsx)("div",{style:{fontSize:"0.85em",color:"#666",marginBottom:"4px"},children:s.current_position||s.short_bio?.substring(0,60)+"..."||0}),(0,d.jsx)("button",{onClick:()=>e(s.md_filename),style:{fontSize:"0.8em",padding:"2px 8px",cursor:"pointer"},children:"Open profile"})]},s.md_filename||t)})})]})})},n)})]})}}}]);