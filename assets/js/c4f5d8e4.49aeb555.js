"use strict";(globalThis.webpackChunkionlandscape_site=globalThis.webpackChunkionlandscape_site||[]).push([[634],{192(e,n,t){t.r(n),t.d(n,{default:()=>l});var o=t(6540),s=t(8478),i=t(4848);function r(){const[e,n]=(0,o.useState)(null),[s,r]=(0,o.useState)(null),l=t(8738).A,c=t(8287).A;return(0,i.jsxs)("div",{style:{display:"flex",height:"100vh"},children:[(0,i.jsx)("div",{style:{flex:1},children:(0,i.jsx)(l,{onPersonSelect:e=>n(e),onLocationSelect:e=>r(e)})}),(0,i.jsx)("div",{style:{width:420,borderLeft:"1px solid #ddd",overflow:"auto"},children:(0,i.jsx)(c,{personId:e,location:s})})]})}function l(){return(0,i.jsx)(s.A,{fallback:(0,i.jsx)("div",{children:"Loading..."}),children:()=>(0,i.jsx)(r,{})})}},8287(e,n,t){t.d(n,{A:()=>r});var o=t(6540),s=t(7331),i=t(4848);const r=function({personId:e,location:n}){const[t,r]=(0,o.useState)([]),[l,c]=(0,o.useState)(null),[d,a]=(0,o.useState)("");return(0,o.useEffect)(()=>{fetch("/ionlandscape/data/people.json").then(e=>e.json()).then(r).catch(e=>{fetch("/data/people.json").then(e=>e.json()).then(r).catch(e=>console.warn("Could not load people.json",e))})},[]),(0,o.useEffect)(()=>{if(!e)return c(null),void a("");const n=t.find(n=>n.md_filename===e)||t.find(n=>n.id===e);n?(c(n),a(n.short_bio||"No biography available.")):c(null)},[e,t]),n&&!l?(0,i.jsxs)("div",{style:{padding:16},children:[(0,i.jsxs)("h3",{children:[n.city,", ",n.country]}),(0,i.jsx)("p",{children:"People at this location (click a marker):"})]}):l?(0,i.jsxs)("div",{style:{padding:16},children:[(0,i.jsx)("h2",{children:l.name}),(0,i.jsx)("p",{children:(0,i.jsxs)("em",{children:[l.current_position&&l.current_position.title," \u2014 ",l.current_position&&l.current_position.institution]})}),(0,i.jsxs)("p",{children:[(0,i.jsx)("strong",{children:"Platforms:"})," ",(l.platforms||[]).join(", ")]}),(0,i.jsxs)("p",{children:[(0,i.jsx)("strong",{children:"Keywords:"})," ",(l.keywords||[]).join(", ")]}),(0,i.jsx)("hr",{}),(0,i.jsx)(s.oz,{children:d}),(0,i.jsx)("hr",{}),(0,i.jsx)("p",{children:(0,i.jsx)("strong",{children:"Links"})}),(0,i.jsxs)("ul",{children:[l.links&&l.links.google_scholar?(0,i.jsx)("li",{children:(0,i.jsx)("a",{href:l.links.google_scholar,children:"Google Scholar"})}):null,l.links&&l.links.orcid?(0,i.jsx)("li",{children:(0,i.jsx)("a",{href:l.links.orcid,children:"ORCID"})}):null,l.links&&l.links.homepage?(0,i.jsx)("li",{children:(0,i.jsx)("a",{href:l.links.homepage,children:"Homepage"})}):null]})]}):(0,i.jsxs)("div",{style:{padding:16},children:[(0,i.jsx)("h3",{children:"Ion Landscape"}),(0,i.jsx)("p",{children:"Click a marker on the map to view a person profile."})]})}},8738(e,n,t){t.d(n,{A:()=>p});var o=t(6540),s=t(6162),i=t(4489),r=t(3489),l=t(9368),c=t(3481),d=t.n(c),a=t(4848);const h=[20,0];const p=function({onPersonSelect:e,onLocationSelect:n}){const[t,c]=o.useState([]);(0,o.useEffect)(()=>{fetch("/ionlandscape/data/people.geojson").then(e=>e.json()).then(e=>{e&&e.features&&c(e.features)}).catch(e=>{fetch("/data/people.geojson").then(e=>e.json()).then(e=>c(e.features)).catch(e=>console.warn("Could not load people.geojson",e))})},[]),(0,o.useEffect)(()=>{delete d().Icon.Default.prototype._getIconUrl,d().Icon.Default.mergeOptions({iconRetinaUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon-2x.png",iconUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon.png",shadowUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-shadow.png"})},[]);const p=(0,o.useMemo)(()=>function(e){const n=new Map;for(const t of e){const e=t.geometry;if(!e||!e.coordinates)continue;const[o,s]=e.coordinates,i=`${s.toFixed(5)},${o.toFixed(5)}`;n.has(i)||n.set(i,[]),n.get(i).push(t)}for(const[t,o]of n)o.sort((e,n)=>{const t=e.properties?.id||"",o=n.properties?.id||"";return t.localeCompare(o)});return n}(t),[t]);return(0,a.jsxs)(s.W,{center:h,zoom:2,style:{height:"100%",width:"100%"},children:[(0,a.jsx)(l.e,{attribution:"\xa9 OpenStreetMap contributors",url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),Array.from(p.entries()).map(([n,t])=>{const o=t[0],[s,l]=o.geometry.coordinates,c=o.properties||{},d=c.city&&c.country?`${c.city}, ${c.country}`:null;return(0,a.jsx)(i.p,{position:[l,s],children:(0,a.jsx)(r.z,{children:(0,a.jsxs)("div",{style:{minWidth:"200px"},children:[d&&(0,a.jsx)("div",{style:{fontWeight:"bold",marginBottom:"8px",borderBottom:"1px solid #ccc",paddingBottom:"4px"},children:d}),(0,a.jsx)("div",{style:{maxHeight:"200px",overflowY:"auto"},children:t.map((n,o)=>{const s=n.properties||{};return(0,a.jsxs)("div",{style:{padding:"6px 0",borderBottom:o<t.length-1?"1px solid #eee":"none"},children:[(0,a.jsx)("div",{style:{fontWeight:"bold"},children:s.name}),(0,a.jsx)("div",{style:{fontSize:"0.85em",color:"#666",marginBottom:"4px"},children:s.current_position||s.short_bio?.substring(0,60)+"..."||0}),(0,a.jsx)("button",{onClick:()=>e(s.md_filename),style:{fontSize:"0.8em",padding:"2px 8px",cursor:"pointer"},children:"Open profile"})]},s.md_filename||o)})})]})})},n)})]})}}}]);