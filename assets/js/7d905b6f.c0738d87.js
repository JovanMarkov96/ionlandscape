"use strict";(globalThis.webpackChunkionlandscape_site=globalThis.webpackChunkionlandscape_site||[]).push([[840],{8662(e,s,l){l.r(s),l.d(s,{default:()=>c});var t=l(6540),n=l(223),a=l(8774),i=l(6347),r=l(4848);const c=function(){const e=(0,i.zy)(),s=(0,i.W6)(),[l,c]=(0,t.useState)([]),o=new URLSearchParams(e.search),d=o.get("q")||"",u=o.getAll("label"),h=o.getAll("ion"),p=o.getAll("inst"),m=o.getAll("country"),[f,g]=(0,t.useState)(d);(0,t.useEffect)(()=>{const e=document.getElementById("search-input");document.activeElement===e||d===f||g(d)},[d]),(0,t.useEffect)(()=>{const e=setTimeout(()=>{f!==d&&N({q:f,label:u,ion:h,inst:p,country:m},!0)},300);return()=>clearTimeout(e)},[f,u,h,p,m]);const{allLabels:x,allIons:j,allInstitutions:v,allCountries:b}=(0,t.useMemo)(()=>{const e=new Set,s=new Set,t=new Set,n=new Set;return l.forEach(l=>{(l.labels||[]).forEach(s=>e.add(s)),(l.ion_species||[]).forEach(e=>s.add(e)),l.current_position?.institution&&t.add(l.current_position.institution),l.location?.country&&n.add(l.location.country)}),{allLabels:Array.from(e).sort(),allIons:Array.from(s).sort(),allInstitutions:Array.from(t).sort(),allCountries:Array.from(n).sort()}},[l]);(0,t.useEffect)(()=>(document.body.style.overflow="auto",()=>{document.body.style.overflow=""}),[]),(0,t.useEffect)(()=>{fetch("/ionlandscape/data/people.json").then(e=>e.json()).then(c).catch(()=>{fetch("/data/people.json").then(e=>e.json()).then(c)})},[]);const y=(0,t.useMemo)(()=>l.length?l.filter(e=>{if(d){const s=d.toLowerCase();if(!(e.name?.toLowerCase().includes(s)||e.sort_name?.toLowerCase().includes(s)))return!1}if(u.length>0){if(!u.every(s=>e.labels&&e.labels.includes(s)))return!1}if(h.length>0){if(!h.every(s=>e.ion_species&&e.ion_species.includes(s)))return!1}if(p.length>0){if(!p.every(s=>e.current_position?.institution===s))return!1}if(m.length>0){if(!m.every(s=>e.location?.country===s))return!1}return!0}):[],[l,d,u,h,p,m]),N=e=>{const l=new URLSearchParams;e.q&&l.set("q",e.q),(e.label||[]).forEach(e=>l.append("label",e)),(e.ion||[]).forEach(e=>l.append("ion",e)),(e.inst||[]).forEach(e=>l.append("inst",e)),(e.country||[]).forEach(e=>l.append("country",e)),s.push({search:l.toString()})},C=(e,s)=>{const l={q:f,label:u,ion:h,inst:p,country:m};if("inst"===e||"country"===e)l[e]=[s];else{if(l[e].includes(s))return;l[e]=[...l[e],s]}N(l)},w=(e,s)=>{const l={q:f,label:u,ion:h,inst:p,country:m};l[e]=l[e].filter(e=>e!==s),N(l)},_=d||u.length>0||h.length>0||p.length>0||m.length>0,k=x.filter(e=>!u.includes(e)),E=j.filter(e=>!h.includes(e)),A=v.filter(e=>!p.includes(e)),S=b.filter(e=>!m.includes(e));return(0,r.jsx)(n.A,{title:"Groups",children:(0,r.jsxs)("div",{className:"groups-page container margin-vert--lg",children:[(0,r.jsx)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:(0,r.jsx)("h1",{children:"Research Groups"})}),(0,r.jsxs)("div",{className:"filter-bar",children:[(0,r.jsx)("div",{style:{marginBottom:"16px"},children:(0,r.jsx)("input",{id:"search-input",type:"text",className:"filter-select",style:{width:"100%",maxWidth:"400px",cursor:"text"},placeholder:"Search by name...",value:f,onChange:e=>g(e.target.value)})}),(0,r.jsxs)("div",{className:"filter-bar-row",children:[(0,r.jsxs)("select",{className:"filter-select",value:"",onChange:e=>e.target.value&&C("label",e.target.value),children:[(0,r.jsx)("option",{value:"",children:"+ Label"}),k.map(e=>(0,r.jsx)("option",{value:e,children:e},e))]}),(0,r.jsxs)("select",{className:"filter-select",value:"",onChange:e=>e.target.value&&C("ion",e.target.value),children:[(0,r.jsx)("option",{value:"",children:"+ Ion Species"}),E.map(e=>(0,r.jsx)("option",{value:e,children:e},e))]}),(0,r.jsxs)("select",{className:"filter-select",value:"",onChange:e=>e.target.value&&C("inst",e.target.value),children:[(0,r.jsx)("option",{value:"",children:"+ Institution"}),A.map(e=>(0,r.jsx)("option",{value:e,children:e},e))]}),(0,r.jsxs)("select",{className:"filter-select",value:"",onChange:e=>e.target.value&&C("country",e.target.value),children:[(0,r.jsx)("option",{value:"",children:"+ Country"}),S.map(e=>(0,r.jsx)("option",{value:e,children:e},e))]}),_&&(0,r.jsx)("button",{className:"clear-all-btn",onClick:()=>{g(""),s.push({search:""})},children:"Clear All"})]}),_&&(0,r.jsxs)("div",{className:"filter-chips",children:[u.map(e=>(0,r.jsxs)("span",{className:"filter-chip filter-chip--label",children:[e," ",(0,r.jsx)("button",{className:"filter-chip-remove",onClick:()=>w("label",e),children:"\xd7"})]},`label-${e}`)),h.map(e=>(0,r.jsxs)("span",{className:"filter-chip filter-chip--ion",children:[e," ",(0,r.jsx)("button",{className:"filter-chip-remove",onClick:()=>w("ion",e),children:"\xd7"})]},`ion-${e}`)),p.map(e=>(0,r.jsxs)("span",{className:"filter-chip",style:{background:"#e9ecef",color:"#333",border:"1px solid #ddd"},children:["\ud83c\udfdb\ufe0f ",e," ",(0,r.jsx)("button",{className:"filter-chip-remove",onClick:()=>w("inst",e),children:"\xd7"})]},`inst-${e}`)),m.map(e=>(0,r.jsxs)("span",{className:"filter-chip",style:{background:"#e9ecef",color:"#333",border:"1px solid #ddd"},children:["\ud83c\udf0d ",e," ",(0,r.jsx)("button",{className:"filter-chip-remove",onClick:()=>w("country",e),children:"\xd7"})]},`country-${e}`))]})]}),(0,r.jsxs)("p",{style:{color:"#666"},children:["Found ",y.length," researchers"]}),(0,r.jsxs)("div",{className:"row",children:[y.map(e=>(0,r.jsx)("div",{className:"col col--4 margin-bottom--lg",children:(0,r.jsxs)("div",{className:"card",children:[(0,r.jsx)("div",{className:"card__header",children:(0,r.jsx)("h3",{children:e.name})}),(0,r.jsxs)("div",{className:"card__body",children:[(0,r.jsx)("p",{children:e.current_position?.institution}),(0,r.jsx)("div",{style:{marginBottom:8},children:e.labels?.map(e=>(0,r.jsx)("span",{className:"badge badge--primary margin-right--xs",style:{cursor:"pointer"},onClick:()=>C("label",e),children:e},e))}),(0,r.jsx)("div",{children:e.ion_species?.map(e=>(0,r.jsx)("span",{className:"badge badge--secondary margin-right--xs",style:{cursor:"pointer"},onClick:()=>C("ion",e),children:e},e))})]}),(0,r.jsx)("div",{className:"card__footer",children:(0,r.jsx)(a.A,{to:`/?person=${e.id}`,className:"button button--primary button--block",children:"View on Map"})})]})},e.id)),0===y.length&&(0,r.jsx)("div",{className:"col col--12",children:(0,r.jsx)("div",{className:"alert alert--warning",children:(0,r.jsx)("p",{children:"No groups found matching criteria."})})})]})]})})}}}]);